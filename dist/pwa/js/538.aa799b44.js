"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[538],{4538:(e,t,n)=>{n.r(t),n.d(t,{default:()=>q});var a=n(9835),o=n(6970);function r(e,t,n,r,i,l){const s=(0,a.up)("q-btn"),u=(0,a.up)("q-input"),d=(0,a.up)("q-toolbar"),c=(0,a.up)("q-img"),m=(0,a.up)("q-item-section"),p=(0,a.up)("q-item-label"),h=(0,a.up)("q-tooltip"),w=(0,a.up)("q-item"),b=(0,a.up)("q-virtual-scroll"),y=(0,a.up)("q-card-section"),v=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(v,{style:{height:"100vh"}},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{style:{height:"68px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{icon:"o_arrow_back",flat:"",round:"",class:"q-mr-md",onClick:t[0]||(t[0]=t=>e.context.emit("close"))}),(0,a.Wm)(u,{modelValue:e.query,"onUpdate:modelValue":t[1]||(t[1]=t=>e.query=t),dense:"",filled:"",rounded:"",placeholder:"YouTube search...",clearable:"",debounce:1e3,style:{width:"100%"},loading:e.loading,disable:e.loading},null,8,["modelValue","loading","disable"])])),_:1}),(0,a.Wm)(y,{style:{height:"calc(100% - 68px)"}},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{items:e.items,separator:"",style:{height:"100%"}},{default:(0,a.w5)((({item:t,index:n})=>[((0,a.wg)(),(0,a.j4)(w,{key:n,dense:"",class:"q-px-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{src:t.video.thumbnail_src,style:{width:"140px"}},null,8,["src"])])),_:2},1024),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Uk)(" #"+(0,o.zw)(n+1)+" - "+(0,o.zw)(t.video.title),1)])),_:2},1024),(0,a.Wm)(p,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.uploader.username),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(m,{side:""},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{round:"",icon:"o_playlist_add",unelevated:"",color:"green",onClick:n=>e.mainStore.AddToPlaylist(t)},{default:(0,a.w5)((()=>[(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Add to Queue")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024))])),_:1},8,["items"])])),_:1})])),_:1})}var i=n(499),l=n(9085),s=(n(9665),n(9981)),u=n.n(s);function d(){function e(e,r){e.forEach((e=>{try{e.hasOwnProperty("itemSectionRenderer")?e.itemSectionRenderer.contents.forEach((e=>{try{e.hasOwnProperty("channelRenderer")&&r.results.push(t(e.channelRenderer)),e.hasOwnProperty("videoRenderer")&&r.results.push(o(e.videoRenderer)),e.hasOwnProperty("radioRenderer")&&r.results.push(a(e.radioRenderer)),e.hasOwnProperty("playlistRenderer")&&r.results.push(n(e.playlistRenderer))}catch(i){console.error("Failed to parse renderer:",i),console.log(e)}})):e.hasOwnProperty("continuationItemRenderer")&&(r["nextPageToken"]=e.continuationItemRenderer.continuationEndpoint.continuationCommand.token)}catch(i){console.error("Failed to read contents for section list:",i),console.log(e)}}))}function t(e){let t={id:e.channelId,title:e.title.simpleText,url:`https://www.youtube.com${e.navigationEndpoint.commandMetadata.webCommandMetadata.url}`,snippet:e.descriptionSnippet?e.descriptionSnippet.runs.reduce(r,""):"",thumbnail_src:e.thumbnail.thumbnails[e.thumbnail.thumbnails.length-1].url,video_count:e.videoCountText?e.videoCountText.runs.reduce(r,""):"",subscriber_count:e.subscriberCountText?e.subscriberCountText.simpleText:"0 subscribers",verified:e.ownerBadges&&e.ownerBadges.some((e=>e.metadataBadgeRenderer.style.indexOf("VERIFIED")>-1))||!1};return{channel:t}}function n(e){let t=e.thumbnailRenderer.playlistVideoThumbnailRenderer.thumbnail.thumbnails,n={id:e.playlistId,title:e.title.simpleText,url:`https://www.youtube.com${e.navigationEndpoint.commandMetadata.webCommandMetadata.url}`,thumbnail_src:t[t.length-1].url,video_count:e.videoCount},a={username:e.shortBylineText.runs[0].text,url:`https://www.youtube.com${e.shortBylineText.runs[0].navigationEndpoint.commandMetadata.webCommandMetadata.url}`};return{playlist:n,uploader:a}}function a(e){let t={id:e.playlistId,title:e.title.simpleText,url:`https://www.youtube.com${e.navigationEndpoint.commandMetadata.webCommandMetadata.url}`,thumbnail_src:e.thumbnail.thumbnails[e.thumbnail.thumbnails.length-1].url,video_count:e.videoCountText.runs.reduce(r,"")},n={username:e.shortBylineText?e.shortBylineText.simpleText:"YouTube"};return{radio:t,uploader:n}}function o(e){let t={id:e.videoId,title:e.title.runs.reduce(r,""),url:`https://www.youtube.com${e.navigationEndpoint.commandMetadata.webCommandMetadata.url}`,duration:e.lengthText?e.lengthText.simpleText:"Live",snippet:e.descriptionSnippet?e.descriptionSnippet.runs.reduce(((e,t)=>e+(t.bold?`<b>${t.text}</b>`:t.text)),""):"",upload_date:e.publishedTimeText?e.publishedTimeText.simpleText:"Live",thumbnail_src:e.thumbnail.thumbnails[e.thumbnail.thumbnails.length-1].url,views:e.viewCountText?e.viewCountText.simpleText||e.viewCountText.runs.reduce(r,""):e.publishedTimeText?"0 views":"0 watching"},n={username:e.ownerText.runs[0].text,url:`https://www.youtube.com${e.ownerText.runs[0].navigationEndpoint.commandMetadata.webCommandMetadata.url}`};return n.verified=e.ownerBadges&&e.ownerBadges.some((e=>e.metadataBadgeRenderer.style.indexOf("VERIFIED")>-1))||!1,{video:t,uploader:n}}function r(e,t){return e+t.text}async function i(t,n,a){return new Promise(((o,r)=>{let i={results:[]};if(n)i["parser"]="json_format.page_token",i["key"]=n,u().post(`https://www.youtube.com/youtubei/v1/search?key=${n}`,{json:{context:{client:{clientName:"WEB",clientVersion:"2.20201022.01.01"}},continuation:a}},((t,n,a)=>{if(!t&&200===n.statusCode)return e(a.onResponseReceivedCommands[0].appendContinuationItemsAction.continuationItems,i),o(i);o({error:t})}));else{let n=`https://www.youtube.com/results?q=${encodeURIComponent(t)}`;u().get(n,{withCredentials:!1}).then((t=>{if(console.warn("yutube get",t),200===t.status){var n=t.data;i["parser"]="json_format",i["key"]=n.match(/"innertubeApiKey":"([^"]*)/)[1];let r,l=[];try{let e=n.match(/ytInitialData[^{]*(.*?);\s*<\/script>/s);e&&e.length>1?i["parser"]+=".object_var":(i["parser"]+=".original",e=n.match(/ytInitialData"[^{]*(.*);\s*window\["ytInitialPlayerResponse"\]/s)),r=JSON.parse(e[1]),i["estimatedResults"]=r.estimatedResults||"0",l=r.contents.twoColumnSearchResultsRenderer.primaryContents.sectionListRenderer.contents}catch(a){console.error("Failed to parse data:",a),console.log(r)}return e(l,i),o(i)}o({error:t.statusText})})).catch((e=>{console.warn("err",e),o({error:e})}))}}))}return{youtube:i}}const c=(0,a.aZ)({name:"YTSearch",emits:["close"],setup(e,t){const n=(0,i.iH)("AIzaSyBam3KaApHnQwkQK8YlxdSGqCjSEL2omLo"),o=(0,l.h)(),r=(0,i.iH)(null),s=((0,a.f3)("axios"),(0,i.iH)([])),u=(0,i.iH)(!1),{youtube:c}=d();(0,a.Fl)((()=>r.value?`https://www.googleapis.com/youtube/v3/search?key=${n.value}&type=video&part=snippet&maxResults=20&q=${r.value}`:`https://www.googleapis.com/youtube/v3/search?key=${n.value}&type=video&part=snippet&maxResults=20&q=videoke+latest+songs+with+lyrics`));(0,a.YP)(r,(()=>{m()}));const m=async()=>{u.value=!0,await c(r.value||"videoke+latest+songs+with+lyrics").then((e=>{console.warn("serach",e,e.results),u.value=!1,s.value=[...e.results]})).catch((()=>{u.value=!1}))};return(0,a.bv)((()=>{m()})),{context:t,mainStore:o,loading:u,items:s,query:r}}});var m=n(1639),p=n(4458),h=n(1663),w=n(4455),b=n(1852),y=n(3190),v=n(2482),g=n(490),x=n(1233),T=n(335),f=n(3115),_=n(6858),C=n(9984),R=n.n(C);const k=(0,m.Z)(c,[["render",r]]),q=k;R()(c,"components",{QCard:p.Z,QToolbar:h.Z,QBtn:w.Z,QInput:b.Z,QCardSection:y.Z,QVirtualScroll:v.Z,QItem:g.Z,QItemSection:x.Z,QImg:T.Z,QItemLabel:f.Z,QTooltip:_.Z})}}]);