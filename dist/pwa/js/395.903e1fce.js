"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[395],{1414:(e,t,a)=>{a.r(t),a.d(t,{default:()=>$});var l=a(9835),i=a(6970),o=a(1957);const n=(0,l._)("span",{class:"text-white",style:{"font-size":"1.4em","line-height":"1.5em"}},"PettyCash",-1),s=(0,l._)("div",{style:{"line-height":"36px",color:"white"}},"Install this app?",-1),r=(0,l._)("div",{style:{"line-height":"36px",color:"white"}}," A new version of this app is now available. Please refresh the app. ",-1);function d(e,t,a,d,u,p){const m=(0,l.up)("q-btn"),c=(0,l.up)("q-toolbar-title"),w=(0,l.up)("q-space"),h=(0,l.up)("q-tooltip"),g=(0,l.up)("q-toolbar"),f=(0,l.up)("q-header"),k=(0,l.up)("q-item-label"),v=(0,l.up)("q-icon"),b=(0,l.up)("q-item-section"),_=(0,l.up)("q-item"),y=(0,l.up)("q-card-section"),W=(0,l.up)("q-card"),S=(0,l.up)("q-menu"),x=(0,l.up)("q-list"),q=(0,l.up)("q-expansion-item"),U=(0,l.up)("q-separator"),I=(0,l.up)("q-drawer"),C=(0,l.up)("router-view"),Z=(0,l.up)("q-page-container"),D=(0,l.up)("MessageDialog"),M=(0,l.up)("q-dialog"),H=(0,l.up)("q-layout");return(0,l.wg)(),(0,l.j4)(H,{class:(0,i.C_)("app-main-layout "+(d.mobileView?"mobile-view":"")),view:"hHh lpR fFf",style:{background:"#0e0c0c"}},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{class:"app-header dark q-py-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[d.q.screen.width<1014?((0,l.wg)(),(0,l.j4)(m,{key:0,flat:"",dense:"",round:"",onClick:t[0]||(t[0]=e=>d.leftDrawerOpen=!d.leftDrawerOpen),icon:"r_menu",size:"md",class:"toggle-main-drawer",color:"white"})):(0,l.kq)("",!0),(0,l.Wm)(c,{class:"app-title",style:{overflow:"inherit"}},{default:(0,l.w5)((()=>[n])),_:1}),d.mobileView?((0,l.wg)(),(0,l.j4)(w,{key:1})):(0,l.kq)("",!0),(0,l.Wm)(m,{round:"",flat:"",icon:"o_notifications",size:"md",class:"app-btn",onClick:t[1]||(t[1]=e=>d.ShowRightDrawerItem(2)),color:"white"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Notifications")])),_:1})])),_:1}),d.mobileView?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(m,{key:2,round:"",flat:"",icon:"o_brightness_medium",size:"md",class:"app-btn",onClick:d.SwitchTheme,color:"white"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Switch Theme")])),_:1})])),_:1},8,["onClick"]))])),_:1})])),_:1}),(0,l.Wm)(I,{modelValue:d.leftDrawerOpen,"onUpdate:modelValue":t[2]||(t[2]=e=>d.leftDrawerOpen=e),"show-if-above":"",mini:!0,class:"app-drawer"},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{class:"q-px-none q-pt-sm",style:{height:"calc(100vh - 155px)","overflow-y":"auto","overflow-x":"hidden"}},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.locUserMenu,((t,a)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:a},["separator"!==t.label&&(void 0!==t.userItem||void 0===t.hasHeader&&void 0!==t.items&&void 0===t.ignoreItems)?((0,l.wg)(),(0,l.j4)(q,{id:`drawermenuitem${a}`,group:"menu",key:`${a}-ei`,"default-opened":void 0!==t.opened&&t.opened,icon:""!==t.icon?t.icon:"r_settings",label:d.GetLocaleString(t.langkey,t.label),"header-class":"sticky-menu-header",onMouseenter:e=>t.showMenu=!0,onMouseleave:e=>t.showMenu=!1,class:(0,i.C_)({active:void 0!==t.link&&(d.route.path.indexOf(t.link)>-1&&d.miniState&&"/"!==t.link||"/"===t.link&&d.route.path===t.link&&d.miniState)})},{default:(0,l.w5)((()=>[d.miniState?(0,l.wy)(((0,l.wg)(),(0,l.j4)(S,{key:0,modelValue:t.showMenu,"onUpdate:modelValue":e=>t.showMenu=e,"auto-close":"",onMouseenter:e=>t.showMenu=!0,onMouseleave:e=>t.showMenu=!1,"touch-position":"",target:`#drawermenuitem${a}`,anchor:"top right",self:"top left",style:{background:"transparent",padding:"8px","padding-top":"0px","box-shadow":"none"}},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{class:"drawer-pop-menu"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{class:"q-pa-sm"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.items,((e,t)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[void 0!==e.isHeader?((0,l.wg)(),(0,l.j4)(k,{key:t,header:"",style:{"padding-left":"26px","line-height":"2px !important"}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(d.GetLocaleString(e.langkey,e.label)),1)])),_:2},1024)):((0,l.wg)(),(0,l.j4)(_,{key:`${t}-e`,dense:"",clickable:"",style:{"padding-left":"26px"},class:"drawer-item",active:void 0!==e.link&&(d.route.path.indexOf(e.link)>-1&&"/"!==e.link),onClick:t=>void 0!==e.action?d.handleAction(e.action):d.navigateTo({...e.route})},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{avatar:"",style:{width:"32px","min-width":"32px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{size:"16px",name:""!==e.icon&&void 0!==e.icon?e.icon:"r_settings"},null,8,["name"])])),_:2},1024),(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(d.GetLocaleString(e.langkey,e.label)),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["active","onClick"]))],64)))),256))])),_:2},1024)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue","onMouseenter","onMouseleave","target"])),[[o.F8,d.miniState]]):(0,l.kq)("",!0),(0,l.Wm)(W,{style:{"background-color":"transparent"}},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{style:{padding:"0px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(x,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.items,((e,t)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[void 0!==e.isHeader&&d.miniState?((0,l.wg)(),(0,l.j4)(k,{key:t,header:"",style:{"padding-left":"26px","line-height":"2px !important"}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(d.GetLocaleString(e.langkey,e.label)),1)])),_:2},1024)):e.isHeader?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(_,{key:`${t}-qe`,clickable:"",style:{"padding-left":"26px"},class:"drawer-item",active:void 0!==e.link&&(d.route.path.indexOf(e.link)>-1&&!d.miniState&&"/"!==e.link),onClick:t=>void 0!==e.action?d.handleAction(e.action):d.navigateTo({...e.route})},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{avatar:"",style:{width:"32px","min-width":"32px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{size:"16px",name:""!==e.icon&&void 0!==e.icon?e.icon:"r_settings"},null,8,["name"])])),_:2},1024),(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(d.GetLocaleString(e.langkey,e.label)),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["active","onClick"]))],64)))),256))])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["id","default-opened","icon","label","onMouseenter","onMouseleave","class"])):"separator"===t.label||void 0!==t.items&&!t.ignoreItems?((0,l.wg)(),(0,l.j4)(U,{key:`${e.o}-ee`})):((0,l.wg)(),(0,l.j4)(_,{key:`${a}-we`,clickable:"",onClick:e=>d.navigateTo({...t.route}),class:(0,i.C_)({"drawer-item":!0,active:void 0!==t.link&&(d.route.path.indexOf(t.link)>-1&&"/"!==t.link||"/"===t.link&&d.route.path===t.link),"mini-active":void 0!==t.link&&(d.route.path.indexOf(t.link)>-1&&d.miniState&&"/"!==t.link||d.route.path===t.link&&"/"===t.link&&d.miniState)})},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{name:""!==t.icon?t.icon:"r_settings"},null,8,["name"])])),_:2},1024),(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(d.GetLocaleString(t.langkey,t.label)),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick","class"]))],64)))),128))])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(I,{modelValue:d.rightDrawerOpen,"onUpdate:modelValue":t[3]||(t[3]=e=>d.rightDrawerOpen=e),breakpoint:5e4,width:d.q.screen.width<400?d.q.screen.width:400,class:"app-drawer-right",side:"right"},null,8,["modelValue","width"]),(0,l.Wm)(Z,{class:(0,i.C_)({"app-container":!0,mobile:d.mobileView}),style:{position:"fixed",top:"0px",right:"0px",left:"0px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(C)])),_:1},8,["class"]),(0,l.Wm)(D,{ref:"offlineNotif",msg:"SAP is currently offline. All confirmation records will be posted to SAP once status becomes online again.",icon:"r_cloud_off"},null,512),(0,l.Wm)(M,{modelValue:d.mainStore.Installable,"onUpdate:modelValue":t[4]||(t[4]=e=>d.mainStore.Installable=e),seamless:"",position:(d.mobileView,"bottom")},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{class:"bg-primary"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{class:"row"},{default:(0,l.w5)((()=>[s,(0,l.Wm)(w),(0,l.Wm)(m,{label:"Dismiss",flat:"",onClick:d.dismissInstall,"text-color":"white","no-caps":""},null,8,["onClick"]),(0,l.Wm)(m,{label:"Install",color:"green",onClick:d.installPWA,"text-color":"white",unelevated:"","no-caps":""},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","position"]),(0,l.Wm)(M,{modelValue:d.mainStore.hasNewUpdates,"onUpdate:modelValue":t[6]||(t[6]=e=>d.mainStore.hasNewUpdates=e),seamless:"",position:d.mobileView?"top":"bottom"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{class:"bg-red"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{class:"row"},{default:(0,l.w5)((()=>[r,(0,l.Wm)(w),(0,l.Wm)(m,{label:"Dismiss",flat:"","text-color":"white",onClick:t[5]||(t[5]=e=>d.mainStore.SetHasNewUpdates(!1)),"no-caps":""}),(0,l.Wm)(m,{label:"Refresh","text-color":"green",flat:"",onClick:d.RefreshApp,unelevated:"","no-caps":""},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","position"])])),_:1},8,["class"])}var u=a(499),p=a(9302),m=a(4006),c=a(8339),w=a(2209),h=a(6144),g=a(9085),f=a(5268);const k={name:"LayoutDefault",components:{},setup(){(0,l.f3)("eventBus");const e=(0,l.f3)("GetLocaleString"),t=(0,p.Z)(),a=(0,c.yj)(),{navigateTo:i,UseLightTheme:o,toggleDarkMode:n}=(0,f.k)(),s=(0,h.a)(),r=(0,g.h)(),d=(0,u.iH)(600),k=(0,u.iH)(null),v=(0,u.iH)(!0),b=(0,u.iH)("confirm"),_=(0,u.iH)(!1),y=(0,u.iH)([]),W=(0,u.iH)(1),S=(0,l.Fl)((()=>t.screen.width)),x=(0,l.Fl)((()=>{var e=t.screen.width<d.value;return s.ActiveUser&&s.ActiveUser.MobileViewOnly&&(e=!0),e})),q=(0,l.Fl)((()=>t.dark)),U=(0,l.Fl)((()=>s.Menu)),I=(0,u.iH)(!1),C=(0,u.iH)(null);(0,l.JJ)("mobileWidth",d),(0,l.JJ)("mobileView",x),(0,l.JJ)("darkMode",q),(0,l.YP)(b,(()=>{"menu"!==b.value&&(I.value=!1)})),(0,l.YP)((()=>U.value),(()=>{y.value=[...U.value]}),{deep:!0,immediate:!0}),(0,l.YP)(W,(()=>{2!==W.value&&window.localStorage.setItem("finxRightDrawerItem",W.value)}));const Z=()=>{t.cookies.has("_finxiu")?i({name:"RequestAccess"}):s.GetCurrentUser().then((()=>{s.GetUserDashboards(),s.GetUserSites(),s.GetUserProducts()}))},D=()=>{n(),t.dark.set(!o())},M=e=>{"Logout"===e.name?(s.SetUser(null),t.cookies.remove("_finx_auth"),t.cookies.remove("_pdcs_oss"),i({name:"Login"}),w.Z.UserLogout()):"ToggleDarkMode"===e.name&&D()},H=()=>{r.InstallPrompt&&(r.InstallPrompt.prompt(),r.SetInstallable(!1))},Q=()=>{r.SetInstallable(!1),t.cookies.set("install-finx-pwa",null,{expires:15})},V=()=>{r.SetHasNewUpdates(!1),r.appNewUpdates&&r.appNewUpdates.waiting&&r.appNewUpdates.waiting.postMessage({type:"SKIP_WAITING"})},T=e=>{W.value=e,_.value=!0};return(0,l.bv)((async()=>{console.warn(a);var e=o();t.dark.set(!e),setTimeout((()=>{Z()}),100),await r.GetSnapshotYears(),a.query&&void 0!==a.query.snapmonth&&void 0!==a.query.snapyear&&(m.Z.remove("_finxrdr"),r.SyncSnapshot({Enabled:!0,Month:parseInt(a.query.snapmonth),Year:parseInt(a.query.snapyear)}),i({name:"Home"}))})),(0,l.Jd)((()=>{clearInterval(C)})),{q:t,rightDrawerOpen:_,leftDrawerOpen:(0,u.iH)(!1),footerDialog:I,tab:b,route:a,offlineNotif:k,mobileWidth:d,locUserMenu:y,rightDrawerItem:W,mobileView:x,user:s,mainStore:r,miniState:v,scrWidth:S,darkMode:q,navigateTo:i,handleAction:M,installPWA:H,dismissInstall:Q,SwitchTheme:D,GetLocaleString:e,RefreshApp:V,CheckAuth:Z,ShowRightDrawerItem:T}}};var v=a(1639),b=a(7605),_=a(6602),y=a(1663),W=a(4455),S=a(1973),x=a(335),q=a(2857),U=a(136),I=a(6858),C=a(990),Z=a(1357),D=a(2765),M=a(4458),H=a(3190),Q=a(3246),V=a(490),T=a(1233),A=a(3115),L=a(6019),P=a(1123),j=a(6362),G=a(2218),O=a(2133),z=a(2074),N=a(900),Y=a(9984),R=a.n(Y);const J=(0,v.Z)(k,[["render",d]]),$=J;R()(k,"components",{QLayout:b.Z,QHeader:_.Z,QToolbar:y.Z,QBtn:W.Z,QToolbarTitle:S.Z,QImg:x.Z,QIcon:q.Z,QSpace:U.Z,QTooltip:I.Z,QBadge:C.Z,QAvatar:Z.Z,QPopupProxy:D.Z,QCard:M.Z,QCardSection:H.Z,QList:Q.Z,QItem:V.Z,QItemSection:T.Z,QItemLabel:A.Z,QDrawer:L.Z,QExpansionItem:P.Z,QMenu:j.Z,QSeparator:G.Z,QPageContainer:O.Z,QDialog:z.Z,QTab:N.Z})}}]);