"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[288],{1288:(e,t,a)=>{a.r(t),a.d(t,{default:()=>B});var l=a(9835),i=a(6970),o=a(1957);const n=(0,l._)("span",{class:"q-ml-md text-etc-green",style:{"font-size":"1.2em"}},"Petty Cash",-1),s=["src"],r=["src"],u=(0,l._)("div",{style:{"line-height":"36px",color:"white"}},"Install this app?",-1),d=(0,l._)("div",{style:{"line-height":"36px",color:"white"}}," A new version of this app is now available. Please refresh the app. ",-1);function m(e,t,a,m,p,c){const w=(0,l.up)("q-btn"),h=(0,l.up)("q-toolbar-title"),g=(0,l.up)("q-space"),f=(0,l.up)("q-tooltip"),k=(0,l.up)("q-icon"),v=(0,l.up)("q-avatar"),_=(0,l.up)("q-item-section"),b=(0,l.up)("q-item-label"),y=(0,l.up)("q-item"),W=(0,l.up)("q-list"),x=(0,l.up)("q-card-section"),q=(0,l.up)("q-card"),S=(0,l.up)("q-popup-proxy"),U=(0,l.up)("q-toolbar"),D=(0,l.up)("q-header"),I=(0,l.up)("q-menu"),Z=(0,l.up)("q-expansion-item"),A=(0,l.up)("q-separator"),C=(0,l.up)("q-drawer"),M=(0,l.up)("router-view"),H=(0,l.up)("q-page-container"),Q=(0,l.up)("MessageDialog"),V=(0,l.up)("q-dialog"),P=(0,l.up)("q-layout");return(0,l.wg)(),(0,l.j4)(P,{class:(0,i.C_)("app-main-layout "+(m.mobileView?"mobile-view":"")),view:"hHh lpR fFf",style:{background:"#0e0c0c"}},{default:(0,l.w5)((()=>[(0,l.Wm)(D,{class:"app-header dark q-py-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(U,null,{default:(0,l.w5)((()=>[m.q.screen.width<1014&&void 0!==m.user.ActiveUser.ID&&m.user.ActiveUser.IsAdmin?((0,l.wg)(),(0,l.j4)(w,{key:0,flat:"",dense:"",round:"",onClick:t[0]||(t[0]=e=>m.leftDrawerOpen=!m.leftDrawerOpen),icon:"r_menu",size:"md",class:"toggle-main-drawer",color:"white"})):(0,l.kq)("",!0),(0,l.Wm)(h,{class:"app-title",style:{overflow:"inherit"}},{default:(0,l.w5)((()=>[n])),_:1}),m.mobileView?((0,l.wg)(),(0,l.j4)(g,{key:1})):(0,l.kq)("",!0),(0,l.Wm)(w,{color:"white",round:"",flat:"",icon:"o_notifications",size:"md",class:"app-btn",onClick:t[1]||(t[1]=e=>m.ShowRightDrawerItem(2))},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Notifications")])),_:1})])),_:1}),m.mobileView?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(w,{key:2,color:"white",round:"",flat:"",icon:"o_dark_mode",size:"md",class:"app-btn",onClick:m.SwitchTheme},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Switch Theme")])),_:1})])),_:1},8,["onClick"])),(0,l.Wm)(v,{size:"32px",class:"q-ml-sm"},{default:(0,l.w5)((()=>[m.user.ActiveUser.Photo?((0,l.wg)(),(0,l.iD)("img",{key:0,src:`data:image/png;base64,${m.user.ActiveUser.Photo}`},null,8,s)):((0,l.wg)(),(0,l.j4)(k,{key:1,name:"o_person",color:"white",size:"24px"})),m.user.ActiveUser?((0,l.wg)(),(0,l.j4)(S,{key:2,style:{"max-width":"100%"}},{default:(0,l.w5)((()=>[(0,l.Wm)(q,{style:{width:"430px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{class:"q-pa-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(_,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{size:"88px"},{default:(0,l.w5)((()=>[m.user.ActiveUser.Photo?((0,l.wg)(),(0,l.iD)("img",{key:0,src:`data:image/png;base64,${m.user.ActiveUser.Photo}`},null,8,r)):(0,l.kq)("",!0)])),_:1})])),_:1}),(0,l.Wm)(_,{top:""},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{class:"text-h6 text-bold"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(m.user.ActiveUser.DisplayName),1)])),_:1}),(0,l.Wm)(b,{caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(m.user.ActiveUser.Email),1)])),_:1}),(0,l.Wm)(b,{caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(m.user.ActiveUser.Title),1)])),_:1}),(0,l.Wm)(b,{caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)("Reports to: "+(0,i.zw)(m.user.ActiveUser.Manager),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):(0,l.kq)("",!0)])),_:1})])),_:1})])),_:1}),(0,l.Wm)(C,{modelValue:m.leftDrawerOpen,"onUpdate:modelValue":t[2]||(t[2]=e=>m.leftDrawerOpen=e),"show-if-above":"",bordered:"",mini:!0,class:"app-drawer"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{class:"q-px-none",style:{height:"calc(100vh - 155px)","overflow-y":"auto","overflow-x":"hidden"}},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(m.locUserMenu,((t,a)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:a},["separator"!==t.label&&(void 0!==t.userItem||void 0===t.hasHeader&&void 0!==t.items&&void 0===t.ignoreItems)?((0,l.wg)(),(0,l.j4)(Z,{id:`drawermenuitem${a}`,group:"menu",key:`${a}-ei`,"default-opened":void 0!==t.opened&&t.opened,icon:""!==t.icon?t.icon:"r_settings",label:m.GetLocaleString(t.langkey,t.label),"header-class":"sticky-menu-header",onMouseenter:e=>t.showMenu=!0,onMouseleave:e=>t.showMenu=!1,class:(0,i.C_)({active:void 0!==t.link&&(m.route.path.indexOf(t.link)>-1&&m.miniState&&"/"!==t.link||"/"===t.link&&m.route.path===t.link&&m.miniState)})},{default:(0,l.w5)((()=>[m.miniState?(0,l.wy)(((0,l.wg)(),(0,l.j4)(I,{key:0,modelValue:t.showMenu,"onUpdate:modelValue":e=>t.showMenu=e,"auto-close":"",onMouseenter:e=>t.showMenu=!0,onMouseleave:e=>t.showMenu=!1,"touch-position":"",target:`#drawermenuitem${a}`,anchor:"top right",self:"top left",style:{background:"transparent",padding:"8px","padding-top":"0px","box-shadow":"none"}},{default:(0,l.w5)((()=>[(0,l.Wm)(q,{class:"drawer-pop-menu"},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{class:"q-pa-sm"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.items,((e,t)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[void 0!==e.isHeader?((0,l.wg)(),(0,l.j4)(b,{key:t,header:"",style:{"padding-left":"26px","line-height":"2px !important"}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(m.GetLocaleString(e.langkey,e.label)),1)])),_:2},1024)):((0,l.wg)(),(0,l.j4)(y,{key:`${t}-e`,dense:"",clickable:"",style:{"padding-left":"26px"},class:"drawer-item",active:void 0!==e.link&&(m.route.path.indexOf(e.link)>-1&&"/"!==e.link),onClick:t=>void 0!==e.action?m.handleAction(e.action):m.navigateTo({...e.route})},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{avatar:"",style:{width:"32px","min-width":"32px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{size:"16px",name:""!==e.icon&&void 0!==e.icon?e.icon:"r_settings"},null,8,["name"])])),_:2},1024),(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(m.GetLocaleString(e.langkey,e.label)),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["active","onClick"]))],64)))),256))])),_:2},1024)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue","onMouseenter","onMouseleave","target"])),[[o.F8,m.miniState]]):(0,l.kq)("",!0),(0,l.Wm)(q,{style:{"background-color":"transparent"}},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{style:{padding:"0px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.items,((e,t)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[void 0!==e.isHeader&&m.miniState?((0,l.wg)(),(0,l.j4)(b,{key:t,header:"",style:{"padding-left":"26px","line-height":"2px !important"}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(m.GetLocaleString(e.langkey,e.label)),1)])),_:2},1024)):e.isHeader?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(y,{key:`${t}-qe`,clickable:"",style:{"padding-left":"26px"},class:"drawer-item",active:void 0!==e.link&&(m.route.path.indexOf(e.link)>-1&&!m.miniState&&"/"!==e.link),onClick:t=>void 0!==e.action?m.handleAction(e.action):m.navigateTo({...e.route})},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{avatar:"",style:{width:"32px","min-width":"32px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{size:"16px",name:""!==e.icon&&void 0!==e.icon?e.icon:"r_settings"},null,8,["name"])])),_:2},1024),(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(m.GetLocaleString(e.langkey,e.label)),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["active","onClick"]))],64)))),256))])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["id","default-opened","icon","label","onMouseenter","onMouseleave","class"])):"separator"===t.label||void 0!==t.items&&!t.ignoreItems?((0,l.wg)(),(0,l.j4)(A,{key:`${e.o}-ee`})):((0,l.wg)(),(0,l.j4)(y,{key:`${a}-we`,clickable:"",onClick:e=>m.navigateTo({...t.route}),class:(0,i.C_)({"drawer-item":!0,active:void 0!==t.link&&(m.route.path.indexOf(t.link)>-1&&"/"!==t.link||"/"===t.link&&m.route.path===t.link),"mini-active":void 0!==t.link&&(m.route.path.indexOf(t.link)>-1&&m.miniState&&"/"!==t.link||m.route.path===t.link&&"/"===t.link&&m.miniState)})},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{name:""!==t.icon?t.icon:"r_settings"},null,8,["name"])])),_:2},1024),(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(m.GetLocaleString(t.langkey,t.label)),1)])),_:2},1024)])),_:2},1024),m.miniState&&m.q.screen.width>=1014?(0,l.wy)(((0,l.wg)(),(0,l.j4)(f,{key:0},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(m.GetLocaleString(t.langkey,t.label)),1)])),_:2},1536)),[[o.F8,m.miniState&&m.q.screen.width>=1014]]):(0,l.kq)("",!0)])),_:2},1032,["onClick","class"]))],64)))),128))])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(C,{modelValue:m.rightDrawerOpen,"onUpdate:modelValue":t[3]||(t[3]=e=>m.rightDrawerOpen=e),bordered:"",breakpoint:5e4,width:m.q.screen.width<400?m.q.screen.width:400,class:"app-drawer-right",side:"right"},null,8,["modelValue","width"]),(0,l.Wm)(H,{class:(0,i.C_)({"app-container":!0,mobile:m.mobileView}),style:{position:"fixed",top:"0px",right:"0px",left:"0px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(M)])),_:1},8,["class"]),(0,l.Wm)(Q,{ref:"offlineNotif",msg:"SAP is currently offline. All confirmation records will be posted to SAP once status becomes online again.",icon:"r_cloud_off"},null,512),(0,l.Wm)(V,{modelValue:m.mainStore.Installable,"onUpdate:modelValue":t[4]||(t[4]=e=>m.mainStore.Installable=e),seamless:"",position:m.mobileView?"top":"bottom"},{default:(0,l.w5)((()=>[(0,l.Wm)(q,{class:"bg-primary"},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{class:"row"},{default:(0,l.w5)((()=>[u,(0,l.Wm)(g),(0,l.Wm)(w,{label:"Dismiss",flat:"",onClick:m.dismissInstall,"text-color":"white"},null,8,["onClick"]),(0,l.Wm)(w,{label:"Install",color:"green",onClick:m.installPWA,"text-color":"white",unelevated:""},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","position"]),(0,l.Wm)(V,{modelValue:m.mainStore.hasNewUpdates,"onUpdate:modelValue":t[6]||(t[6]=e=>m.mainStore.hasNewUpdates=e),seamless:"",position:m.mobileView?"top":"bottom"},{default:(0,l.w5)((()=>[(0,l.Wm)(q,{class:"bg-red"},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{class:"row"},{default:(0,l.w5)((()=>[d,(0,l.Wm)(g),(0,l.Wm)(w,{label:"Dismiss",flat:"","text-color":"white",onClick:t[5]||(t[5]=e=>m.mainStore.SetHasNewUpdates(!1))}),(0,l.Wm)(w,{label:"Refresh","text-color":"green",flat:"",onClick:m.RefreshApp,unelevated:""},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","position"])])),_:1},8,["class"])}var p=a(499),c=a(9302),w=a(4006),h=a(8339),g=a(5496),f=a(1163),k=a(6144),v=a(9085),_=a(5268);const b={name:"LayoutDefault",components:{},setup(){(0,l.f3)("eventBus");const e=(0,l.f3)("GetLocaleString"),t=(0,c.Z)(),a=(0,h.yj)(),{UseLightTheme:i,toggleDarkMode:o}=(0,g.Z)(),{navigateTo:n}=(0,_.k)(),s=(0,k.a)(),r=(0,v.h)(),u=(0,p.iH)(600),d=(0,p.iH)(null),m=(0,p.iH)(!0),b=(0,p.iH)("confirm"),y=(0,p.iH)(!1),W=(0,p.iH)([]),x=(0,p.iH)(1),q=(0,l.Fl)((()=>t.screen.width)),S=(0,l.Fl)((()=>{var e=t.screen.width<u.value;return s.ActiveUser&&s.ActiveUser.MobileViewOnly&&(e=!0),e})),U=(0,l.Fl)((()=>t.dark)),D=(0,l.Fl)((()=>s.Menu)),I=(0,p.iH)(!1),Z=(0,p.iH)(null);(0,l.JJ)("mobileWidth",u),(0,l.JJ)("mobileView",S),(0,l.JJ)("darkMode",U),(0,l.YP)(b,(()=>{"menu"!==b.value&&(I.value=!1)})),(0,l.YP)((()=>D.value),(()=>{W.value=[...D.value]}),{deep:!0,immediate:!0}),(0,l.YP)(x,(()=>{2!==x.value&&window.localStorage.setItem("finxRightDrawerItem",x.value)}));const A=()=>{t.cookies.has("_finxiu")?n({name:"RequestAccess"}):s.GetCurrentUser().then((()=>{s.GetUserDashboards(),s.GetUserSites(),s.GetUserProducts()}))},C=()=>{o(),t.dark.set(!i())},M=e=>{"Logout"===e.name?(s.SetUser(null),t.cookies.remove("_finx_auth"),t.cookies.remove("_pdcs_oss"),n({name:"Login"}),f.Z.UserLogout()):"ToggleDarkMode"===e.name&&C()},H=()=>{r.InstallPrompt&&(r.InstallPrompt.prompt(),r.SetInstallable(!1))},Q=()=>{r.SetInstallable(!1),t.cookies.set("install-finx-pwa",null,{expires:15})},V=()=>{r.SetHasNewUpdates(!1),r.appNewUpdates&&r.appNewUpdates.waiting&&r.appNewUpdates.waiting.postMessage({type:"SKIP_WAITING"})},P=e=>{x.value=e,y.value=!0};return(0,l.bv)((async()=>{console.warn(a);var e=i();t.dark.set(!e),setTimeout((()=>{A()}),100),await r.GetSnapshotYears(),a.query&&void 0!==a.query.snapmonth&&void 0!==a.query.snapyear&&(w.Z.remove("_finxrdr"),r.SyncSnapshot({Enabled:!0,Month:parseInt(a.query.snapmonth),Year:parseInt(a.query.snapyear)}),n({name:"Home"}))})),(0,l.Jd)((()=>{clearInterval(Z)})),{q:t,rightDrawerOpen:y,leftDrawerOpen:(0,p.iH)(!1),footerDialog:I,tab:b,route:a,offlineNotif:d,mobileWidth:u,locUserMenu:W,rightDrawerItem:x,mobileView:S,user:s,mainStore:r,miniState:m,scrWidth:q,darkMode:U,navigateTo:n,handleAction:M,installPWA:H,dismissInstall:Q,SwitchTheme:C,GetLocaleString:e,RefreshApp:V,CheckAuth:A,ShowRightDrawerItem:P}}};var y=a(1639),W=a(7605),x=a(6602),q=a(1663),S=a(4455),U=a(1973),D=a(335),I=a(136),Z=a(6858),A=a(990),C=a(1357),M=a(2857),H=a(2765),Q=a(4458),V=a(3190),P=a(3246),T=a(490),z=a(1233),j=a(3115),L=a(6019),G=a(1123),O=a(6362),N=a(926),Y=a(2133),R=a(2074),$=a(900),F=a(9984),J=a.n(F);const K=(0,y.Z)(b,[["render",m]]),B=K;J()(b,"components",{QLayout:W.Z,QHeader:x.Z,QToolbar:q.Z,QBtn:S.Z,QToolbarTitle:U.Z,QImg:D.Z,QSpace:I.Z,QTooltip:Z.Z,QBadge:A.Z,QAvatar:C.Z,QIcon:M.Z,QPopupProxy:H.Z,QCard:Q.Z,QCardSection:V.Z,QList:P.Z,QItem:T.Z,QItemSection:z.Z,QItemLabel:j.Z,QDrawer:L.Z,QExpansionItem:G.Z,QMenu:O.Z,QSeparator:N.Z,QPageContainer:Y.Z,QDialog:R.Z,QTab:$.Z})}}]);